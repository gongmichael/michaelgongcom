---
title: "Selected Equity Options Summary"
date: 2018-09-13T14:51:12+06:00
author: Michael
description: Uses Async call to lucene index for super fast autocompletion to address performance issue loading config.
featured: false
categories: ["cat1"]
tags: ["java","jQuery","REST APIs","Bamboo","JSON"]
---


# 1. Selected Equity Options Summary

Base on our previous research, we find that our models performs better in the first two decile of S&P 500. Thus, in this version of results update, we restrict our attension to the top largest 100 stocks of S&P 100:

* 1 Calculate the market capitalization of all S&P 500 stocks at the end of 2014, December 31.
* 2 Sort the stocks tickers by their market cap in descending order and select the top 100 largest stocks.
* 3 Divide the **100 stocks into 10 deciles.**
* 4 Perform data screending procedures.

```python
import numpy as np

```


> Below is the summary of selected equity options 


```python
__________________________________________________________________________________________________
     No. Stocks  Mean Imvol  Average Contract  Trading Freq(%)  Trading Volume  Trading Dispersion
__________________________________________________________________________________________________
SPX           1       0.226          1051.033            1.000         485.848               0.396

D1            8       0.298           159.255            1.000         457.608               0.689
D2           10       0.259           139.025            0.999         326.940               0.626
D3           10       0.299           113.835            0.997         478.158               0.588
D4           10       0.278           114.813            0.999         150.185               0.503
D5            8       0.306           139.777            1.000          92.867               0.522
D6           10       0.298           105.791            1.000         121.219               0.504
D7           10       0.291           135.624            0.999          62.211               0.400
D8            9       0.316            93.550            0.989          91.392               0.431
D9            7       0.360           153.492            0.999          89.073               0.425
D10           4       0.293            66.093            0.996          33.206               0.352

sum/avg      87       0.293           206.572            0.998         217.155               0.494
__________________________________________________________________________________________________
```


# 2. Cross Sectional Regression Factors Summary
According to our discussion, we implement two versions of cross-sectional regression.

Build on top of Bernales and Guidolin 5 Factors model:
* version 1: Add dummy variables of delta_n, delta2 for DOTM, OTM options for **all call and put**.
* version 2: Add dummy variables of delta_n, delta2 for **DOTM and OTM of put**, and **DITM and ITM of call**

Thus, version 1 dedicates to investigate the put-call parity and liquidity related issues, and version 2 attempts to investigate the asymmetry of the IVS over two regions.

Summary of regression factors:
* The results of version 2 only better for index options, while the version 1 results seem to be good for both equity and index options.
* For index options, our deltaO and delta2O have high percentage significance for both versions.
* For equity options, the percentage significance of CS8 of version 2 is down to 27.2%. 

#### Below is the factor summary for version 1
```python
_______________________________________________________________________________________________________________________________________
               CS5                            CS6                            CS7                            CS8                        
              mean    std   t-test sig-pct   mean    std   t-test sig-pct   mean    std   t-test sig-pct   mean    std   t-test sig-pct
_______________________________________________________________________________________________________________________________________
EQT const   -1.332  0.293   98.072   1.000 -1.336  0.294  108.468   1.000 -1.337  0.295  110.933   1.000 -1.339  0.292   99.683   0.998
    matur_n  0.005  0.047    4.692   0.725  0.005  0.047    5.174   0.753  0.005  0.047    5.283   0.759  0.006  0.037    2.848   0.554
    delta_n  0.158  0.091   17.614   0.962  0.144  0.117   14.177   0.940  0.144  0.122   14.132   0.941  0.144  0.121   15.024   0.943
    delta2   0.073  0.047    6.198   0.906  0.078  0.046    7.069   0.943  0.078  0.052    6.228   0.918  0.078  0.051    6.552   0.923
    inter    0.009  0.027    2.070   0.465  0.009  0.027    2.297   0.508  0.009  0.027    2.346   0.517  0.009  0.025    2.464   0.528
    deltaO                                  0.030  0.081    4.105   0.709  0.031  0.094    4.382   0.725  0.031  0.093    4.654   0.738
    delta2O                                                                0.004  0.040    1.776   0.417  0.003  0.037    1.877   0.441
    maturS                                                                                               -0.003  0.095    2.981   0.549
    R2       0.744  0.184                   0.802  0.135                   0.814  0.128                   0.834  0.122                 
SPX const   -1.658  0.293  332.681   1.000 -1.661  0.294  368.930   1.000 -1.661  0.294  372.903   1.000 -1.655  0.285  335.955   1.000
    matur_n  0.028  0.059   18.321   0.931  0.028  0.059   20.115   0.940  0.028  0.058   20.320   0.942  0.022  0.044   12.393   0.894
    delta_n  0.309  0.110   83.904   0.999  0.299  0.140   72.540   0.990  0.301  0.145   69.550   0.991  0.301  0.145   72.498   0.991
    delta2   0.085  0.042   21.676   0.975  0.090  0.039   24.328   0.986  0.093  0.038   21.570   0.992  0.094  0.038   22.489   0.992
    inter    0.010  0.026    6.726   0.849  0.010  0.025    7.478   0.860  0.010  0.026    7.558   0.866  0.010  0.026    7.936   0.867
    deltaO                                  0.021  0.087   12.282   0.913  0.018  0.100   12.728   0.919  0.017  0.100   13.305   0.922
    delta2O                                                               -0.007  0.021    3.380   0.630 -0.007  0.021    3.522   0.641
    maturS                                                                                                0.021  0.071    7.532   0.823
    R2       0.878  0.116                   0.915  0.054                   0.918  0.051                   0.924  0.049        
_______________________________________________________________________________________________________________________________________
```

#### Below is the factor summary for version 2
```python
_______________________________________________________________________________________________________________________________________
               CS5                            CS6                            CS7                            CS8                        
              mean    std   t-test sig-pct   mean    std   t-test sig-pct   mean    std   t-test sig-pct   mean    std   t-test sig-pct
_______________________________________________________________________________________________________________________________________
EQT const   -1.332  0.293   98.072   1.000 -1.335  0.296   67.581   0.999 -1.330  0.299   69.085   0.998 -1.333  0.298   66.534   0.997
    matur_n  0.005  0.047    4.692   0.725  0.005  0.047    4.678   0.723  0.005  0.047    4.938   0.729  0.006  0.037    2.643   0.518
    delta_n  0.158  0.091   17.614   0.962  0.148  0.146    2.899   0.684  0.113  0.165    2.078   0.512  0.111  0.165    2.202   0.527
    delta2   0.073  0.047    6.198   0.906  0.070  0.100    2.141   0.532  0.043  0.128    1.436   0.317  0.042  0.126    1.488   0.329
    inter    0.009  0.027    2.070   0.465  0.009  0.027    2.058   0.461  0.010  0.027    2.140   0.470  0.010  0.027    2.234   0.477
    deltaO                                  0.015  0.260    1.057   0.197 -0.072  0.374    1.231   0.259 -0.067  0.307    1.284   0.272
    delta2O                                                                0.150  0.279    2.992   0.602  0.149  0.240    3.161   0.613
    maturS                                                                                               -0.004  0.096    2.789   0.511
    R2       0.744  0.184                   0.749  0.181                   0.767  0.180                   0.786  0.174                 
SPX const   -1.658  0.293  332.681   1.000 -1.666  0.294  253.478   1.000 -1.677  0.305  276.188   1.000 -1.670  0.295  264.959   1.000
    matur_n  0.028  0.059   18.321   0.931  0.028  0.059   18.409   0.931  0.030  0.059   21.259   0.938  0.024  0.045   13.140   0.886
    delta_n  0.309  0.110   83.904   0.999  0.271  0.099   15.443   0.967  0.181  0.073   10.342   0.953  0.181  0.073   10.894   0.954
    delta2   0.085  0.042   21.676   0.975  0.066  0.053    6.452   0.874  0.014  0.057    3.373   0.691  0.015  0.057    3.542   0.694
    inter    0.010  0.026    6.726   0.849  0.011  0.026    6.785   0.853  0.013  0.026    8.022   0.883  0.014  0.026    8.426   0.889
    deltaO                                  0.065  0.103    3.053   0.615 -0.021  0.133    3.276   0.638 -0.021  0.133    3.421   0.656
    delta2O                                                                0.273  0.191   14.004   0.864  0.272  0.191   14.660   0.869
    maturS                                                                                                0.022  0.071    7.686   0.801
    R2       0.878  0.116                   0.880  0.115                   0.893  0.118                   0.900  0.116                 
_______________________________________________________________________________________________________________________________________
```

#### The figure below plot the factors of version 1
![](https://drive.google.com/uc?export=view&id=0B9DzYBQbrkqTeFhMQjRVQ3lQOVE)
#### The figure below plot the factors of version 2
![](https://drive.google.com/uc?export=view&id=0B9DzYBQbrkqTRUZjWWQ3WmxLX1E)

**The time series plots of both version show that the factors of version 1 have higher percentage significance across stocks.

# 3. IVS Fit
The table below shows the in-sample fit aggregate by size deciles of both version. It seems that version 1 has lower in-sample RMSE.

Summary of insample fit:
* Version 1 has lower fit error than version 2.
* The relative RMSE of version 1 decreased significantly in financial crisis period, while the performance of version 2 general remain stable over time.
* For version 2, simply add deltaO (CS6) barely change the fit.

```python
_______________________________________________________________________________
             Version 1                      Version 2
      __________________________    __________________________    _____________
        CS5    CS6    CS7    CS8      CS5    CS6    CS7    CS8    spread    PCP
_______________________________________________________________________________
SPX   0.024  0.022  0.022  0.021    0.024  0.024  0.022  0.021     0.100  0.175
D1    0.033  0.031  0.030  0.028    0.033  0.033  0.032  0.030     0.076  0.132
D2    0.034  0.032  0.031  0.030    0.034  0.034  0.033  0.031     0.097  0.171
D3    0.038  0.035  0.034  0.032    0.038  0.037  0.036  0.035     0.113  0.141
D4    0.041  0.038  0.037  0.035    0.041  0.041  0.039  0.038     0.148  0.169
D5    0.037  0.034  0.033  0.032    0.037  0.037  0.036  0.035     0.118  0.135
D6    0.040  0.035  0.034  0.033    0.040  0.040  0.038  0.037     0.115  0.157
D7    0.036  0.033  0.032  0.030    0.036  0.036  0.034  0.032     0.127  0.128
D8    0.042  0.038  0.037  0.036    0.042  0.042  0.040  0.039     0.141  0.168
D9    0.048  0.044  0.043  0.040    0.048  0.048  0.047  0.044     0.120  0.114
D10   0.033  0.030  0.029  0.028    0.033  0.032  0.031  0.030     0.133  0.165
_______________________________________________________________________________
```
The figure below plots the relative RMSE of version 1
![](https://drive.google.com/uc?export=view&id=0B9DzYBQbrkqTTXRGWGpTR3Vfbjg)
The figure below plots the relative RMSE of version 2
![](https://drive.google.com/uc?export=view&id=0B9DzYBQbrkqTYTVBcC11enFfaWc)

The relative RMSE time series plots show promising performance of version 1, especially in financial crisis period, which is relatively easy to motivate.

# 4. Out of sample forecasting
In below, I report 4 figures of out of sample RMSE. I still have many others results, but I think following 4 are most interesting one.

Summary of out of sample forecasting:
* Version 1 has lower RMSE and higher MCPDC (not shown) than version 2 does.
* Relative out of sample performance of CS8 is better at DOTM and OTM regions.
* CS8 of version 2 only shines for index options.


**The figure below plots the out of sample RMSE of version 1 at option groups level**
![](https://drive.google.com/uc?export=view&id=0B9DzYBQbrkqTaXRUekJkRlE3aEE)
**The figure below plots the out of sample RMSE of version 2 at option groups level**
![](https://drive.google.com/uc?export=view&id=0B9DzYBQbrkqTa3FsRHMwOTF4ems)


**The figure below plots the relative out of sample RMSE of version 1 at option groups and size level**
![](https://drive.google.com/uc?export=view&id=0B9DzYBQbrkqTcl9nOTgwY0I1Mjg)
**The figure below plots the relative out of sample RMSE of version 2 at option groups and size level**
![](https://drive.google.com/uc?export=view&id=0B9DzYBQbrkqTai1CaGJMcVgwREE)

